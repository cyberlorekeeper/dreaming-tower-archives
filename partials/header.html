<!-- Top Nav -->
<header class="relative mx-auto max-w-6xl z-50 px-6 pt-10">
  <!-- Top row -->
  <div class="flex items-center justify-between gap-4">
    <a href="/" class="inline-flex items-center gap-3 group">
      <span class="flex h-10 w-10 items-center justify-center rounded-lg bg-abyss/70 border border-rift/60">
        <img src="/images/icon.png" alt="Cyber Lorekeeper" class="h-8 w-8" />
      </span>
      <span class="font-display text-sm tracking-[.14em] uppercase text-stardust/80 group-hover:text-stardust">
        The Cyber Lorekeeper
      </span>
    </a>

    <!-- Mobile menu button -->
    <button id="navToggle"
      class="focus-ring inline-flex items-center justify-center rounded-md border border-rift/60 bg-abyss/50 px-3 py-2 text-sm font-semibold text-stardust shadow-sm ring-1 ring-glow/30 hover:ring-glow/60 hover:text-glow transition lg:hidden"
      type="button"
      aria-expanded="false"
      aria-controls="mobileNavPanel">
      Menu
    </button>


    <!-- Desktop nav -->
    <nav id="siteNav"
         class="hidden lg:flex items-center gap-4 text-sm text-stardust/80"
         aria-label="Primary">
      <a class="hover:text-glow underline-offset-4 hover:underline" href="/chronicles/">Chronicles</a>
      <a class="hover:text-glow underline-offset-4 hover:underline" href="/field-notes/">Field Notes</a>
      <a class="hover:text-glow underline-offset-4 hover:underline" href="/characters/">Characters</a>

      <!-- The World dropdown -->
      <div class="relative group" id="worldMenuWrap">
        <a href="/world/" class="inline-flex items-center gap-1 hover:text-glow underline-offset-4 hover:underline">
          The World <span aria-hidden="true">▾</span>
        </a>

        <!-- Hover buffer -->
        <div class="absolute left-0 top-full h-2 w-full"></div>

        <div class="absolute pointer-events-auto z-50 left-0 top-full mt-2 hidden min-w-[220px] rounded-lg border border-rift/60 bg-abyss/90 p-2 shadow-card backdrop-blur-md group-hover:block group-focus-within:block">

          <a href="/world/cipheria.html" class="block rounded-md px-3 py-2 hover:bg-rift/40 hover:text-glow" role="menuitem">
            Cipheria's History
          </a>
          <a href="/world/other-locations.html" class="block rounded-md px-3 py-2 hover:bg-rift/40 hover:text-glow" role="menuitem">
            Other Locations
          </a>
          <a href="/world/bestiary.html" class="block rounded-md px-3 py-2 hover:bg-rift/40 hover:text-glow" role="menuitem">
            Bestiary
          </a>
        </div>
      </div>

      <a class="hover:text-glow underline-offset-4 hover:underline" href="/author.html">Author</a>
    </nav>
  </div>

    <!-- Mobile nav panel (hidden by default, toggled by Menu button) -->
  <div id="mobileNavPanel"
       class="hidden lg:hidden mt-4 rounded-xl border border-rift/60 bg-abyss/40 p-4 shadow-card backdrop-blur-md">
    
    <!-- Mobile: The World link + collapsible submenu -->
    <div class="rounded-lg border border-rift/60 bg-abyss/30 p-3">
      <a class="block font-semibold text-stardust/90 hover:text-glow underline underline-offset-4"
         href="/world.html">
        The World
      </a>

      <details class="mt-2">
        <summary class="cursor-pointer text-sm text-stardust/80 hover:text-glow">
          Sections <span aria-hidden="true">▾</span>
        </summary>

        <div class="mt-2 flex flex-col gap-2 pl-2">
          <a class="hover:text-glow underline underline-offset-4" href="/world/cipheria.html">Cipheria&#39;s History</a>
          <a class="hover:text-glow underline underline-offset-4" href="/world/other-locations.html">Other Locations</a>
          <a class="hover:text-glow underline underline-offset-4" href="/world/bestiary.html">Bestiary</a>
        </div>
      </details>
    </div>
  </div>
</header>
